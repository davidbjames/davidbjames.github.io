{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ToC3"}],"languages":["swift"],"platforms":["iOS"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Injecting a C3 hierarchy requires a “make” closure"},{"type":"text","text":" "},{"type":"text","text":"which is passed a builder of the containing UIView."},{"type":"text","text":" "},{"type":"text","text":"This containing view will be auto-sized according to"},{"type":"text","text":" "},{"type":"text","text":"the containing SwiftUI view geometry so you can"},{"type":"text","text":" "},{"type":"text","text":"size or position the C3 views accordingly."},{"type":"text","text":" "},{"type":"text","text":"The “make” closure is executed once only (or at"},{"type":"text","text":" "},{"type":"text","text":"whatever time SwiftUI decides to recreate the UI)"},{"type":"text","text":" "},{"type":"text","text":"and should contain the bulk of the layout declaration."},{"type":"text","text":" "},{"type":"text","text":"Optionally provide an “update” closure which is"},{"type":"text","text":" "},{"type":"text","text":"passed the top-level C3 view(s) (as a Query)."},{"type":"text","text":" "},{"type":"text","text":"(In case of creating sibling views, all views will"},{"type":"text","text":" "},{"type":"text","text":"be passed in the query)."},{"type":"text","text":" "},{"type":"text","text":"The “update” closure is called repeatedly, whenever"},{"type":"text","text":" "},{"type":"text","text":"SwiftUI considers it necessary to update the UI,"},{"type":"text","text":" "},{"type":"text","text":"and thus should contain the minimum updates required."},{"type":"text","text":" "},{"type":"text","text":"From the top-level view(s) you may then query down"},{"type":"text","text":" "},{"type":"text","text":"into the hierarchy to make mutations within the tree."},{"type":"text","text":" "},{"type":"text","text":"Optionally, pass a “defer” closure which is identical"},{"type":"text","text":" "},{"type":"text","text":"to “update” but fired asynchronously and can be used"},{"type":"text","text":" "},{"type":"text","text":"for code that must be run after layout is complete"},{"type":"text","text":" "},{"type":"text","text":"(e.g. creating\/updating a layer addon when using Autolayout)."},{"type":"text","text":" "},{"type":"text","text":"As with “update”, “defer” should contain the minimum"},{"type":"text","text":" "},{"type":"text","text":"updates required – especially important with “defer”"},{"type":"text","text":" "},{"type":"text","text":"which may cause race conditions."},{"type":"text","text":" "},{"type":"text","text":"NOTE: for piecemeal deferrals you can also just use"},{"type":"text","text":" "},{"type":"text","text":"Mutator.defer() within the “update” closure."},{"type":"text","text":" "},{"type":"text","text":"Optionally, pass “delay” for the amount of time that"},{"type":"text","text":" "},{"type":"text","text":"an asynchronous “defer” block should be delayed."},{"type":"text","text":" "},{"type":"text","text":"(Passing “delay” requires wrapping the init in parens.)"},{"type":"text","text":" "},{"type":"text","text":"The “make”, “update” and “defer” closures are passed a"},{"type":"text","text":" "},{"type":"text","text":"context object with environment information, animation"},{"type":"text","text":" "},{"type":"text","text":"transaction, coordinator (if present) and other"},{"type":"text","text":" "},{"type":"text","text":"information as needed."}]},{"type":"codeListing","syntax":null,"code":["VStack {","    ToC3 { context, view in","        View().in(view)","            ...","    } update: { context, view in","        view.with { $0.shapes }","            ...","    } defer: { context, view in","        view.with { $0.shapes }","            .layerUpdate(on:.gradient)","            ...","    }","    .frame(minHeight:200.0)","","    ... other SwiftUI views ...","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"NOTE: AutoLayout constraints are generally updated"},{"type":"text","text":" "},{"type":"text","text":"and animated along with SwiftUI updates\/animations."},{"type":"text","text":" "},{"type":"text","text":"If using FreeLayout and you want simultaneous animations"},{"type":"text","text":" "},{"type":"text","text":"with SwiftUI updates\/animations you will need to wrap"},{"type":"text","text":" "},{"type":"text","text":"any changes (in the update closure) within an animator"},{"type":"text","text":" "},{"type":"text","text":"with the timing that matches."},{"type":"text","text":" "},{"type":"text","text":"SwiftUI default timing is 0.35 seconds."},{"type":"text","text":" "},{"type":"text","text":"To work with state bindings in the containing"},{"type":"text","text":" "},{"type":"text","text":"SwiftUI View just use them as normal to read\/write"},{"type":"text","text":" "},{"type":"text","text":"to these bindings. In case of creating a complex"},{"type":"text","text":" "},{"type":"text","text":"C3 view hierarchy create subviews using the Constructible"},{"type":"text","text":" "},{"type":"text","text":"protocol or ConstructibleWithData passing model bindings"},{"type":"text","text":" "},{"type":"text","text":"down via in(data:) parameter."},{"type":"text","text":" "},{"type":"text","text":"See also generic "},{"type":"codeVoice","code":"To<>"},{"type":"text","text":" if the top-level item will"},{"type":"text","text":" "},{"type":"text","text":"be other than a C3.View, for example a C3.Guide"},{"type":"text","text":" "},{"type":"text","text":"or C3.Layer, etc."}]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/c3\/toc3"],"traits":[{"interfaceLanguage":"swift"}]}],"relationshipsSections":[{"identifiers":["doc:\/\/com.davidbjames.C3\/documentation\/C3\/Injector","doc:\/\/com.davidbjames.C3\/7SwiftUI4ViewP"],"kind":"relationships","title":"Conforms To","type":"conformsTo"}],"identifier":{"url":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Inject C3 view hierarchy into SwiftUI hierarchy."}],"kind":"symbol","metadata":{"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ToC3"}],"title":"ToC3","roleHeading":"Structure","role":"symbol","symbolKind":"struct","externalID":"s:2C302ToA0V","modules":[{"name":"C3"}],"navigatorTitle":[{"kind":"identifier","text":"ToC3"}]},"hierarchy":{"paths":[["doc:\/\/com.davidbjames.C3\/documentation\/C3"]]},"topicSections":[{"title":"Initializers","identifiers":["doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/init()"]},{"title":"Instance Properties","identifiers":["doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/coordinator","doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/defer","doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/make","doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/options","doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/update"]},{"title":"Type Aliases","identifiers":["doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/R","doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/T"]},{"title":"Default Implementations","identifiers":["doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/Injector-Implementations","doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/View-Implementations"],"generated":true}],"references":{"doc://com.davidbjames.C3/documentation/C3/ToC3/update":{"role":"symbol","title":"update","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"update"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"InjectorUpdate","preciseIdentifier":"s:2C314InjectorUpdatea"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"T","preciseIdentifier":"s:2C302ToA0V1Ta"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"R","preciseIdentifier":"s:2C302ToA0V1Ra"},{"kind":"text","text":">?"}],"abstract":[{"type":"text","text":"The “update” closure used for updating the hierarchy."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/update","kind":"symbol","type":"topic","url":"\/documentation\/c3\/toc3\/update"},"doc://com.davidbjames.C3/documentation/C3/Injector":{"role":"symbol","title":"Injector","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"Injector"}],"abstract":[{"type":"text","text":"Abstraction for any kind of Injector."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/Injector","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Injector"}],"url":"\/documentation\/c3\/injector"},"doc://com.davidbjames.C3/7SwiftUI4ViewP":{"type":"unresolvable","title":"SwiftUI.View","identifier":"doc:\/\/com.davidbjames.C3\/7SwiftUI4ViewP"},"doc://com.davidbjames.C3/documentation/C3/ToC3/make":{"role":"symbol","title":"make","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"make"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"InjectorMake","preciseIdentifier":"s:2C312InjectorMakea"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"R","preciseIdentifier":"s:2C302ToA0V1Ra"},{"kind":"text","text":">"}],"abstract":[{"type":"text","text":"The “make” closure used for creation of the hierarchy."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/make","kind":"symbol","type":"topic","url":"\/documentation\/c3\/toc3\/make"},"doc://com.davidbjames.C3/documentation/C3/ToC3/Injector-Implementations":{"role":"collectionGroup","title":"Injector Implementations","abstract":[],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/Injector-Implementations","kind":"article","type":"topic","url":"\/documentation\/c3\/toc3\/injector-implementations"},"doc://com.davidbjames.C3/documentation/C3/ToC3/R":{"role":"symbol","title":"ToC3.R","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"R"}],"abstract":[],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/R","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"R"}],"url":"\/documentation\/c3\/toc3\/r"},"doc://com.davidbjames.C3/documentation/C3/ToC3/options":{"role":"symbol","title":"options","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"options"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"InjectorOptions","preciseIdentifier":"s:2C315InjectorOptionsa"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Closure for specifying options for an injected hierarchy."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/options","kind":"symbol","type":"topic","url":"\/documentation\/c3\/toc3\/options"},"doc://com.davidbjames.C3/documentation/C3/ToC3/T":{"role":"symbol","title":"ToC3.T","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"T"}],"abstract":[{"type":"text","text":"The top-level C3 type that is injected (e.g. C3.Layer)"}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/T","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"T"}],"url":"\/documentation\/c3\/toc3\/t"},"doc://com.davidbjames.C3/documentation/C3/ToC3":{"role":"symbol","title":"ToC3","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ToC3"}],"abstract":[{"type":"text","text":"Inject C3 view hierarchy into SwiftUI hierarchy."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ToC3"}],"url":"\/documentation\/c3\/toc3"},"doc://com.davidbjames.C3/documentation/C3/ToC3/View-Implementations":{"role":"collectionGroup","title":"View Implementations","abstract":[],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/View-Implementations","kind":"article","type":"topic","url":"\/documentation\/c3\/toc3\/view-implementations"},"doc://com.davidbjames.C3/documentation/C3/ToC3/defer":{"role":"symbol","title":"defer","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"`defer`"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"InjectorUpdate","preciseIdentifier":"s:2C314InjectorUpdatea"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"T","preciseIdentifier":"s:2C302ToA0V1Ta"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"R","preciseIdentifier":"s:2C302ToA0V1Ra"},{"kind":"text","text":">?"}],"abstract":[{"type":"text","text":"The “defer” closure used for updating the hierarchy"},{"type":"text","text":" "},{"type":"text","text":"at the beginning of the next run loop."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/defer","kind":"symbol","type":"topic","url":"\/documentation\/c3\/toc3\/defer"},"doc://com.davidbjames.C3/documentation/C3/ToC3/coordinator":{"role":"symbol","title":"coordinator","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"coordinator"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"NilCoordinator","preciseIdentifier":"s:2C314NilCoordinatorC"}],"abstract":[{"type":"text","text":"The optional coordinator. Defaults to a “nil coordinator”."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/coordinator","kind":"symbol","type":"topic","url":"\/documentation\/c3\/toc3\/coordinator"},"doc://com.davidbjames.C3/documentation/C3/ToC3/init()":{"role":"symbol","title":"init()","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"()"}],"abstract":[],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3\/init()","kind":"symbol","type":"topic","url":"\/documentation\/c3\/toc3\/init()"},"doc://com.davidbjames.C3/documentation/C3":{"role":"collection","title":"C3","abstract":[],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3","kind":"symbol","type":"topic","url":"\/documentation\/c3"}}}