{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ToC3WithCoordinator"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"T"},{"kind":"text","text":", "},{"kind":"genericParameter","text":"C"},{"kind":"text","text":"> "},{"kind":"keyword","text":"where"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"T"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/Queryable","preciseIdentifier":"s:2C39QueryableP","text":"Queryable"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"C"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/C3Coordinator","preciseIdentifier":"s:2C30A11CoordinatorP","text":"C3Coordinator"}],"languages":["swift"],"platforms":["iOS"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Coordinators can be used for integrating"},{"type":"text","text":" "},{"type":"text","text":"delegates, data sources and target\/action, etc."},{"type":"text","text":" "},{"type":"text","text":"The coordinator must be initializable without"},{"type":"text","text":" "},{"type":"text","text":"any arguments, and must be marked “final”."},{"type":"text","text":" "},{"type":"text","text":"To use a coordinator that requires intialization"},{"type":"text","text":" "},{"type":"text","text":"parameters, try initializing the coordinator on the"},{"type":"text","text":" "},{"type":"text","text":"containing SwiftUI view and then capturing it within"},{"type":"text","text":" "},{"type":"text","text":"the make\/update closures as needed; in this case,"},{"type":"text","text":" "},{"type":"text","text":"(or if a coordinator is not needed at all) then don’t"},{"type":"text","text":" "},{"type":"text","text":"use this wrapper – use the regular to wrapper instead."},{"type":"text","text":" "},{"type":"text","text":"Injecting a C3 hierarchy requires a “make” closure"},{"type":"text","text":" "},{"type":"text","text":"which is passed a builder of the containing UIView."},{"type":"text","text":" "},{"type":"text","text":"This containing view will be auto-sized according to"},{"type":"text","text":" "},{"type":"text","text":"the containing SwiftUI view geometry so you can"},{"type":"text","text":" "},{"type":"text","text":"size or position the C3 views accordingly."},{"type":"text","text":" "},{"type":"text","text":"The “make” closure is executed once only (or at"},{"type":"text","text":" "},{"type":"text","text":"whatever point SwiftUI decides to recreate the UI)"},{"type":"text","text":" "},{"type":"text","text":"and should contain the bulk of the layout declaration."},{"type":"text","text":" "},{"type":"text","text":"Optionally provide an “update” closure which is"},{"type":"text","text":" "},{"type":"text","text":"passed the top-level C3 item(s) (as a Query)."},{"type":"text","text":" "},{"type":"text","text":"The top-level item type should be the same as"},{"type":"text","text":" "},{"type":"text","text":"the generic parameter."},{"type":"text","text":" "},{"type":"text","text":"(In case of creating sibling items, all siblings"},{"type":"text","text":" "},{"type":"emphasis","inlineContent":[{"type":"text","text":"of the generic type"}]},{"type":"text","text":" will be passed in the query)."},{"type":"text","text":" "},{"type":"text","text":"The “update” closure is called repeatedly, whenever"},{"type":"text","text":" "},{"type":"text","text":"SwiftUI considers it necessary to update the UI,"},{"type":"text","text":" "},{"type":"text","text":"and thus should contain the minimum updates required."},{"type":"text","text":" "},{"type":"text","text":"From the top-level item(s) you may then query down"},{"type":"text","text":" "},{"type":"text","text":"into the hierarchy to make mutations within the tree."},{"type":"text","text":" "},{"type":"text","text":"Optionally, pass a “defer” closure which is identical"},{"type":"text","text":" "},{"type":"text","text":"to “update” but fired asynchronously and can be used"},{"type":"text","text":" "},{"type":"text","text":"for code that must be run after layout is complete"},{"type":"text","text":" "},{"type":"text","text":"(e.g. creating\/updating a layer addon when using Autolayout)."},{"type":"text","text":" "},{"type":"text","text":"As with “update”, “defer” should contain the minimum"},{"type":"text","text":" "},{"type":"text","text":"updates required – especially important with “defer”"},{"type":"text","text":" "},{"type":"text","text":"which may cause race conditions."},{"type":"text","text":" "},{"type":"text","text":"NOTE: for piecemeal deferrals you can also just use"},{"type":"text","text":" "},{"type":"text","text":"Mutator.defer() within the “update” closure."},{"type":"text","text":" "},{"type":"text","text":"Optionally, pass “delay” for the amount of time that"},{"type":"text","text":" "},{"type":"text","text":"an asynchronous “defer” block should be delayed."},{"type":"text","text":" "},{"type":"text","text":"(Passing “delay” requires wrapping the init in parens.)"},{"type":"text","text":" "},{"type":"text","text":"The “make”, “update” and “defer” closures are passed a"},{"type":"text","text":" "},{"type":"text","text":"context object with environment information, animation"},{"type":"text","text":" "},{"type":"text","text":"transaction, coordinator and other information as needed."}]},{"type":"codeListing","syntax":null,"code":["VStack {","    ToC3WithCoordinator<C3.Layer, MyCoordinator> { context, layer in","        Diamond().in(layer)","            ...","    } update { context, layer in","        layer.with?.shapes","            ...","    } defer: { context, view in","        layer.with { $0.shapes }","            .layerUpdate(on:.gradient)","            ...","    }","    .frame(minHeight:200.0)","","    ... other SwiftUI views ...","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"NOTE: AutoLayout constraints are generally updated"},{"type":"text","text":" "},{"type":"text","text":"and animated along with SwiftUI updates\/animations."},{"type":"text","text":" "},{"type":"text","text":"If using FreeLayout and you want simultaneous animations"},{"type":"text","text":" "},{"type":"text","text":"with SwiftUI updates\/animations you will need to wrap"},{"type":"text","text":" "},{"type":"text","text":"any changes in the update closure within an animator"},{"type":"text","text":" "},{"type":"text","text":"with the timing that matches."},{"type":"text","text":" "},{"type":"text","text":"SwiftUI default timing is 0.35 seconds."},{"type":"text","text":" "},{"type":"text","text":"To work with state bindings in the containing"},{"type":"text","text":" "},{"type":"text","text":"SwiftUI View just use them as normal to read\/write"},{"type":"text","text":" "},{"type":"text","text":"to these bindings. In case of creating a complex"},{"type":"text","text":" "},{"type":"text","text":"C3 view hierarchy create subviews using the Constructible"},{"type":"text","text":" "},{"type":"text","text":"protocol or ConstructibleWithData passing model bindings"},{"type":"text","text":" "},{"type":"text","text":"down via in(data:) parameter."}]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/c3\/toc3withcoordinator"],"traits":[{"interfaceLanguage":"swift"}]}],"relationshipsSections":[{"identifiers":["doc:\/\/com.davidbjames.C3\/documentation\/C3\/Injector","doc:\/\/com.davidbjames.C3\/7SwiftUI4ViewP"],"kind":"relationships","title":"Conforms To","type":"conformsTo"}],"identifier":{"url":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Inject C3 hierarchy into SwiftUI hierarchy."},{"type":"text","text":" "},{"type":"text","text":"This supports all C3 types, including views,"},{"type":"text","text":" "},{"type":"text","text":"layers, guides or nodes, and therefore both"},{"type":"text","text":" "},{"type":"text","text":"layout types, FreeLayout and AutoLayout."},{"type":"text","text":" "},{"type":"text","text":"Provide the top-level C3 type as the first generic"},{"type":"text","text":" "},{"type":"text","text":"parameter and the C3Coordinator type for the"},{"type":"text","text":" "},{"type":"text","text":"second generic parameter."}],"kind":"symbol","metadata":{"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ToC3WithCoordinator"}],"title":"ToC3WithCoordinator","roleHeading":"Structure","role":"symbol","symbolKind":"struct","externalID":"s:2C302ToA15WithCoordinatorV","modules":[{"name":"C3"}],"navigatorTitle":[{"kind":"identifier","text":"ToC3WithCoordinator"}]},"hierarchy":{"paths":[["doc:\/\/com.davidbjames.C3\/documentation\/C3"]]},"topicSections":[{"title":"Initializers","identifiers":["doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/init()"]},{"title":"Instance Properties","identifiers":["doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/coordinator","doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/defer","doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/make","doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/options","doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/update"]},{"title":"Type Aliases","identifiers":["doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/R"]},{"title":"Default Implementations","identifiers":["doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/Injector-Implementations","doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/View-Implementations"],"generated":true}],"references":{"doc://com.davidbjames.C3/documentation/C3/ToC3WithCoordinator":{"role":"symbol","title":"ToC3WithCoordinator","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ToC3WithCoordinator"}],"abstract":[{"type":"text","text":"Inject C3 hierarchy into SwiftUI hierarchy."},{"type":"text","text":" "},{"type":"text","text":"This supports all C3 types, including views,"},{"type":"text","text":" "},{"type":"text","text":"layers, guides or nodes, and therefore both"},{"type":"text","text":" "},{"type":"text","text":"layout types, FreeLayout and AutoLayout."},{"type":"text","text":" "},{"type":"text","text":"Provide the top-level C3 type as the first generic"},{"type":"text","text":" "},{"type":"text","text":"parameter and the C3Coordinator type for the"},{"type":"text","text":" "},{"type":"text","text":"second generic parameter."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ToC3WithCoordinator"}],"url":"\/documentation\/c3\/toc3withcoordinator"},"doc://com.davidbjames.C3/documentation/C3/C3Coordinator":{"role":"symbol","title":"C3Coordinator","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"C3Coordinator"}],"abstract":[{"type":"text","text":"Basic coordinator to be used when injecting C3"},{"type":"text","text":" "},{"type":"text","text":"hierarchies using the "},{"type":"codeVoice","code":"ToC3WithCoordinator<>"},{"type":"text","text":" wrapper."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/C3Coordinator","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"C3Coordinator"}],"url":"\/documentation\/c3\/c3coordinator"},"doc://com.davidbjames.C3/documentation/C3/Injector":{"role":"symbol","title":"Injector","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"Injector"}],"abstract":[{"type":"text","text":"Abstraction for any kind of Injector."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/Injector","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Injector"}],"url":"\/documentation\/c3\/injector"},"doc://com.davidbjames.C3/documentation/C3/ToC3WithCoordinator/View-Implementations":{"role":"collectionGroup","title":"View Implementations","abstract":[],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/View-Implementations","kind":"article","type":"topic","url":"\/documentation\/c3\/toc3withcoordinator\/view-implementations"},"doc://com.davidbjames.C3/documentation/C3/Queryable":{"role":"symbol","title":"Queryable","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"Queryable"}],"abstract":[{"type":"text","text":"The protocol composition that views, layers, guides and nodes"},{"type":"text","text":" "},{"type":"text","text":"conform to on all generic wrappers, such as Query, Mutator and others."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/Queryable","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Queryable"}],"url":"\/documentation\/c3\/queryable"},"doc://com.davidbjames.C3/documentation/C3/ToC3WithCoordinator/init()":{"role":"symbol","title":"init()","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"()"}],"abstract":[],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/init()","kind":"symbol","type":"topic","url":"\/documentation\/c3\/toc3withcoordinator\/init()"},"doc://com.davidbjames.C3/documentation/C3/ToC3WithCoordinator/update":{"role":"symbol","title":"update","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"update"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"InjectorUpdate","preciseIdentifier":"s:2C314InjectorUpdatea"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"T","preciseIdentifier":"s:2C302ToA15WithCoordinatorV1Txmfp"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"R","preciseIdentifier":"s:2C302ToA15WithCoordinatorV1Ra"},{"kind":"text","text":">?"}],"abstract":[{"type":"text","text":"The “update” closure used for updating the hierarchy."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/update","kind":"symbol","type":"topic","url":"\/documentation\/c3\/toc3withcoordinator\/update"},"doc://com.davidbjames.C3/documentation/C3/ToC3WithCoordinator/R":{"role":"symbol","title":"ToC3WithCoordinator.R","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"R"}],"abstract":[],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/R","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"R"}],"url":"\/documentation\/c3\/toc3withcoordinator\/r"},"doc://com.davidbjames.C3/documentation/C3/ToC3WithCoordinator/options":{"role":"symbol","title":"options","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"options"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"InjectorOptions","preciseIdentifier":"s:2C315InjectorOptionsa"},{"kind":"text","text":"?"}],"abstract":[{"type":"text","text":"Closure for specifying options for an injected hierarchy."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/options","kind":"symbol","type":"topic","url":"\/documentation\/c3\/toc3withcoordinator\/options"},"doc://com.davidbjames.C3/documentation/C3/ToC3WithCoordinator/coordinator":{"role":"symbol","title":"coordinator","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"coordinator"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"C","preciseIdentifier":"s:2C302ToA15WithCoordinatorV1Cq_mfp"}],"abstract":[{"type":"text","text":"The optional coordinator. Defaults to a “nil coordinator”."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/coordinator","kind":"symbol","type":"topic","url":"\/documentation\/c3\/toc3withcoordinator\/coordinator"},"doc://com.davidbjames.C3/7SwiftUI4ViewP":{"type":"unresolvable","title":"SwiftUI.View","identifier":"doc:\/\/com.davidbjames.C3\/7SwiftUI4ViewP"},"doc://com.davidbjames.C3/documentation/C3/ToC3WithCoordinator/defer":{"role":"symbol","title":"defer","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"`defer`"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"InjectorUpdate","preciseIdentifier":"s:2C314InjectorUpdatea"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"T","preciseIdentifier":"s:2C302ToA15WithCoordinatorV1Txmfp"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"R","preciseIdentifier":"s:2C302ToA15WithCoordinatorV1Ra"},{"kind":"text","text":">?"}],"abstract":[{"type":"text","text":"The “defer” closure used for updating the hierarchy"},{"type":"text","text":" "},{"type":"text","text":"at the beginning of the next run loop."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/defer","kind":"symbol","type":"topic","url":"\/documentation\/c3\/toc3withcoordinator\/defer"},"doc://com.davidbjames.C3/documentation/C3":{"role":"collection","title":"C3","abstract":[],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3","kind":"symbol","type":"topic","url":"\/documentation\/c3"},"doc://com.davidbjames.C3/documentation/C3/ToC3WithCoordinator/Injector-Implementations":{"role":"collectionGroup","title":"Injector Implementations","abstract":[],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/Injector-Implementations","kind":"article","type":"topic","url":"\/documentation\/c3\/toc3withcoordinator\/injector-implementations"},"doc://com.davidbjames.C3/documentation/C3/ToC3WithCoordinator/make":{"role":"symbol","title":"make","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"make"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"InjectorMake","preciseIdentifier":"s:2C312InjectorMakea"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"R","preciseIdentifier":"s:2C302ToA15WithCoordinatorV1Ra"},{"kind":"text","text":">"}],"abstract":[{"type":"text","text":"The “make” closure used for creation of the hierarchy."}],"identifier":"doc:\/\/com.davidbjames.C3\/documentation\/C3\/ToC3WithCoordinator\/make","kind":"symbol","type":"topic","url":"\/documentation\/c3\/toc3withcoordinator\/make"}}}